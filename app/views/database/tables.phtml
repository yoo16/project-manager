<? include('_header.phtml') ?>

<div class="alert alert-danger">
if you want create database's table, please add model on 'Project'.
</div>
<? if ($this->pg_classes): ?>
<div class="card">
  <div class="card-header">
    <h4><?= $this->database['name'] ?></h4>
  </div>
  <div class="card-block overflow-list">
    <table class="table">
      <thead class="thead-default">
        <tr>
          <th>Name</th>
          <th>Comment</th>
        </tr>
      </thead>
      <? foreach ($this->pg_classes as $pg_class): ?>
      <tr>
        <td>
          <a class="" href="<?= url_for('columns', array('database_id' => $this->database['id'], 'pg_class_id' => $pg_class['pg_class_id'])) ?>"><?= $pg_class['tablename'] ?></a>
        </td>
        <td>
          <form method="post" action="<?= url_for('update_table_comment') ?>">
            <div class="row">
             <div class="input-group">
              <input class="form-control col-6" type="text" name="comment" value="<?= $this->table_comments[$pg_class['tablename']] ?>">
              <span class="input-group-btn">
                <button class="btn btn-primary"><?= LABEL_UPDATE ?></button>
              </span>
            </div>
          </div>
          <input type="hidden" name="pg_class_id" value="<?= $pg_class['pg_class_id'] ?>">
          <input type="hidden" name="database_id" value="<?= $this->database['id'] ?>">
        </form>
      </td>
    </tr>
  <? endforeach ?>
</table>
</div>
</div>
<? endif ?>

<?= javascript_tag('controllers/DatabaseController') ?>