<? include('_header.phtml') ?>

<div class="alert alert-success">
  <h3>Model Request</h3>
  <ul>
    <li>If you add model, requestSession() is written in Controller file's before_action().</li>
    <li>ex) $this->user = DB::model('User')->requestSession();</li>
    <li>When requestSession() is executed, you get automatically model by model id or PHP session.</li>
    <li>1) $this->user = DB::model('User')->fetch($_GET['user_id'])</li>
    <li>2) $this->user = $_SESSION[APP_NAME]['user']</li>
  </ul>
</div>

  <div class="pt-3">
    <?= FormHelper::linkButton('new', null, ['class' => 'btn btn-primary', 'label' => LABEL_ADD]) ?>
    <? include('views/components/lib/sortable.phtml') ?>
  </div>

  <table id="sortable-table" class="table">
    <thead class="thead-default">
      <tr>
        <th>&nbsp;</th>
        <th>
          <?= LABEL_MODELS ?>
        </th>
        <th>
          <?= LABEL_PAGE_MODELS_IS_FETCH_LIST_VALUES ?>
        </th>
        <th>
          <?= LABEL_PAGE_MODELS_IS_REQUEST_SESSION ?>
        </th>
      </tr>
    </thead>

    <? if ($this->page_model->values): ?>
      <? foreach ($this->page_model->values as $values): ?>
        <tr row-id="<?= $values['id'] ?>">
          <td>
            <?= FormHelper::linkButton('edit', $values['id'], ['label' => LABEL_EDIT]) ?>
          </td>
          <td>
            <?= $this->model->values[$values['model_id']]['name'] ?>
          </td>
          <td>
            <?= FormHelper::activeLabelTag($values['is_fetch_list_values']) ?>
          </td>
          <td>
            <?= FormHelper::activeLabelTag($values['is_request_session']) ?>
          </td>
        </tr>
        <? endforeach ?>
          <? endif ?>
</table>