<? include('_header.phtml') ?>

  <? include('add_window.phtml') ?>

    <div class="alert alert-success">
      <p>
        <dl>
          <dd>* If you export PHP files(Model, Controller, View etc...) by project-manager, please download PHP Framework '
            <a href="https://github.com/yoo16/phpwork" target="_blank">php-work</a>'.</dd>
        </dl>
      </p>
    </div>

    <div>
      <?= FormHelper::linkModal('#add-window', LABEL_ADD) ?>
      <? include('views/components/sortable.phtml') ?>
    </div>

    <div class="content">
      <table id="sortable-table" class="table" model-name="Project">
        <thead class="thead-default">
          <tr>
            <th>&nbsp;</th>
            <th>Name</th>
            <th>DB</th>
            <th>&nbsp;</th>
          </tr>
        </thead>

        <? if (is_array($this->project->values)): ?>
          <? foreach ($this->project->values as $project->value): ?>
            <tr id="<?= $project->value['id']?>" order="<?= $project->value['sort_order']?>">
              <td>
                <?= FormHelper::linkButton('edit', $project->value['id'], ['label' => LABEL_EDIT]) ?>
              </td>
              <td>
                <?= $this->linkControllerTag('model', 
            [
              'label' => $project->value['name'],
              'http_params' => ['project_id' => $project->value['id']]
            ]
          )
          ?>
              </td>
              <td>
                <?= $project->value['database']['name'] ?>
              </td>
              <td>
                <?= FormHelper::linkButton('export_list', LABEL_EXPORT.LABEL_SETTING, $project->value['id']) ?>
              </td>
            </tr>
            <? endforeach ?>
              <? endif ?>

      </table>
    </div>