<? include('_header.phtml') ?>

<? include('add_window.phtml') ?>

<div class="pt-3">
  <a class="btn btn-primary" href="#" data-toggle="modal" data-target="#add-window"><?= LABEL_ADD ?></a>
</div>

<? if ($this->view->values): ?>
<table class="table">
  <tr>
    <th></th>
    <th>Name</th>
    <th>Overwrite</th>
    <th>URI</th>
  </tr>
  <? foreach ($this->view->values as $view): ?>
  <tr>
    <td><a class="btn btn-sm btn-outline-primary" href="<?= url_for('edit', $view['id']) ?>"><?= LABEL_EDIT ?></a></td>
    <td>
      <div><?= FormHelper::link('view_item/', $view['name'], ['view_id' => $view['id']]) ?></div>
      <div><?= $view['label'] ?></div>
    </td>
    <td>
      <? if ($view['is_force_write']): ?>
      <?= FormHelper::link('change_force_write', 'overwrite', $view['id'], ['class' => 'badge badge-danger']) ?>
      <? else: ?>
      <?= FormHelper::link('change_force_write', 'off', $view['id'], ['class' => 'badge badge-default']) ?>
      <? endif ?>
    </td>
    <td><?= $this->page->value['entity_name'] ?>/<?= $view['name'] ?></td>
    <td>
      <? if ($view['model_id']): ?><?= $this->models[$view['model_id']]['name'] ?><? endif ?>
    </td>
  </tr>
<? endforeach ?> 
</table>
<? endif ?>
