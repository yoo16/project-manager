<? include('_header.phtml') ?>
<div class="pt-3">
  <?= FormHelper::linkButton('new', LABEL_ADD) ?>
  <?= FormHelper::linkButton('sort_order', LABEL_SORT_ORDER) ?>
  <?= FormHelper::linkButton('view/', LABEL_BACK) ?>
</div>

<form action="<?= url_for('update_sort') ?>" method="post">
  <h3><?= $this->view->value['name'] ?></h3>
<table class="table sortable">
  <thead class="thead-deffault">
    <tr>
      <th>&nbsp;</th>
      <th>カラム</th>
      <th>ラベル</th>
      <th>リンクページ</th>
      <th>class</th>
    </tr>
  </thead>

  <? if ($this->view->view_item->values): ?>
    <tbody>
  <? foreach ($this->view->view_item->values as $view_item): ?>
  <tr id="<?= $view_item['id'] ?>">
    <td><?= FormHelper::linkButton('edit', LABEL_EDIT, $view_item['id']) ?></td>
    <td><?= $this->page->model->attribute->values[$view_item['attribute_id']]['name'] ?></td>
    <td><?= $view_item['label'] ?></td>
    <td><?= $this->pages[$view_item['page_id']]['name'] ?></td>
    <td><?= FormHelper::activeLabelTag($view_item['css_class']) ?></td>
  </tr>
  <? endforeach ?>
    </tbody>
  <? endif ?>
</table>
<input class="btn btn-primary" type="submit" value="<?= LABEL_UPDATE ?>">
</form>

<table class="table table-sm">
  <thead class="thead-deffault">
    <tr>
      <th>&nbsp;</th>
      <th>カラム</th>
      <th>ラベル</th>
    </tr>
  </thead>

  <? if ($this->page->model->attribute->values): ?>
  <? foreach ($this->page->model->attribute->values as $view_item): ?>
  <tr>
    <td>
    <form action="<?= url_for('add_for_attribute') ?>" method="post">
    <?= FormHelper::submit(LABEL_ADD, ['class' => 'btn btn-sm btn-primary']) ?>
    <?= FormHelper::hidden('view_item[attribute_id]', $view_item['id']) ?>
    </form>
    </td>
    <td><?= $view_item['name'] ?></td>
    <td><?= $view_item['label'] ?></td>
  </tr>
  <? endforeach ?>
  <? endif ?>

</table>
