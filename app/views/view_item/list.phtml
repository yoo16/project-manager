<? include('_header.phtml') ?>

<div class="pt-3">
  <?= FormHelper::linkButton('new', LABEL_ADD) ?>
  <?= FormHelper::linkButton('sort_order', LABEL_SORT_ORDER) ?>
  <?= FormHelper::linkButton('view/', LABEL_BACK) ?>
  <a class="btn btn-primary" href="<?= url_for('add_all') ?>"><?= LABEL_ALL ?><?= LABEL_ADD ?></a>
</div>

<form action="<?= url_for('update_sort') ?>" method="post">
<table class="table sortable">
  <thead class="thead-deffault">
    <tr>
      <th>&nbsp;</th>
      <th>カラム</th>
      <th>ラベル</th>
      <th>リンクページ</th>
      <th>class</th>
      <th>form</th>
      <th></th>
    </tr>
  </thead>

  <? if ($this->view->view_item->values): ?>
    <tbody>
  <? foreach ($this->view->view_item->values as $view_item): ?>
  <tr id="<?= $view_item['id'] ?>">
    <td>
      <?= FormHelper::linkButton('edit', LABEL_EDIT, $view_item['id']) ?>
      <input id="sort_order_<?= $view_item['id'] ?>" name="sort_order[<?= $view_item['id'] ?>]" type="hidden">
    </td>
    <td><?= $this->page->model->attribute->values[$view_item['attribute_id']]['name'] ?></td>
    <td><?= $view_item['label'] ?></td>
    <td><?= $this->pages[$view_item['page_id']]['name'] ?></td>
    <td><?= FormHelper::activeLabelTag($view_item['css_class']) ?></td>
    <td><?= $view_item['form_type'] ?></td>
    <td><?= $view_item['sort_order'] ?></td>
  </tr>
  <? endforeach ?>
    </tbody>
  <? endif ?>
</table>
<input class="btn btn-primary" type="submit" value="<?= LABEL_UPDATE ?>">
</form>

<table class="table table-sm">
  <thead class="thead-deffault">
    <tr>
      <th>&nbsp;</th>
      <th>カラム</th>
      <th>ラベル</th>
    </tr>
  </thead>

  <? if ($this->page->model->attribute->values): ?>
  <? foreach ($this->page->model->attribute->values as $view_item): ?>
  <tr>
    <td>
    <form action="<?= url_for('add_for_attribute') ?>" method="post">
    <?= FormHelper::submit(LABEL_ADD, ['class' => 'btn btn-sm btn-primary']) ?>
    <?= FormHelper::hidden('view_item[attribute_id]', $view_item['id']) ?>
    </form>
    </td>
    <td><?= $view_item['name'] ?></td>
    <td><?= $view_item['label'] ?></td>
  </tr>
  <? endforeach ?>
  <? endif ?>

</table>
